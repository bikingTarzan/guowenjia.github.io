---
title: 2018-05-31 学习笔记
date: 2018-05-31 12:00:00
tags:
    - vim
    - redis
    - git

---
## vim 相关的:

### vim命令行下的操作
每行的行首都添加一个字符串：%s/^/要插入的字符串
每行的行尾都添加一个字符串：%s/$/要插入的字符串

解释：

    % 代表针对被编辑文件的每一行进行后续操作
    $ 代表一行的结尾处
    ^ 代表一行的开头处

### 命令行中的 Vi 模式
Bash shell 提供了两种模式用于命令行编辑：emacs 和 vi。默认情况下是 Emacs 编辑模式，可以使用以下方式将其更改为 vi 模式：

    set -o vi

在命令行中，可以按下 ESC 键进入 vi 编辑模式，并使用 vi 的单行编辑功能。在命令行中的 vi 编辑模式下，可以通过按下 v 弹出编辑器，这样就可以编辑和保存将在命令行中执行的缓冲。

如果需要回到 emacs 模式，输入：

    set -o emacs

<!--more-->
### 多个文件中执行宏操作

我们已经录制好了一个宏，并且希望在多个文件中运行它。首先我们需要使用文件构建一个参数列表，例如，从一个 Rails 应用中加载所有模型：

    :args app/models/*.rb

然后使用下面的命令运行宏（记录在寄存器 a 中）：

    :argdo normal @a

最后，使用下面的命令保存所有的缓冲：

    :argdo update

[摘自知乎](https://zhuanlan.zhihu.com/p/27968721)

## redis相关的:
mset 同时设置一个或多个key-value对。
如果某个给定key已经存在，那么MSET会用新值覆盖旧值。
msetnx 和 mset相似，但是它只会对不存在key的设置，存在无法设置。
### mset用例(这里就好比python里的列表):
    MSET date "2012.3.30" time "11:00 a.m." weather "sunny"
    MGET date time weather
    1) "2012.3.30"
    2) "11:00 a.m."
    3) "sunny"
    redis> SET google "google.hk"
    OK

    redis> MSET google "google.com"
    OK

    redis> GET google
    "google.com"
### msetnx用例(这里就好比python里的元组):
    redis> MSETNX rmdbs "MySQL" nosql "MongoDB" key-value-store "redis"
    (integer) 1

    redis> MGET rmdbs nosql key-value-store
    1) "MySQL"
    2) "MongoDB"
    3) "redis"

    redis> MSETNX rmdbs "Sqlite" language "python"  # rmdbs 键已经存在，操作失败
    (integer) 0

    redis> EXISTS language                          # 因为 MSET 是原子性操作，language 没有被设置
    (integer) 0

    redis> GET rmdbs                                # rmdbs 也没有被修改
    "MySQL"

## git相关的:
    我经常出现代码改完了发现分支错了的情况，这种情况怎么解决?
    前提是尚未将修改提交到错误的分支.
    git stash
    git checkout targetbranch
    git stash pop
    git add .
    git commit -m xxx

    第一步:将修改的代码暂存到stash
    第二步:切换到正确的分支
    第三步:从stash中取出暂存的代码修改
    至此,对代码的改动，就由错误的分支移动到了正确的分支.


    把当前未提交到本地（和服务器）的代码推入到 Git 的栈中：
    $ git stash

    将以前存放的代码应用回来
    $ git stash apply 或者使用 $ git stash pop
    区别 pop 会删除栈里面数据 apply 会保留数据

    将当前的 Git 栈信息打印出来

    $ git stash list
    将你指定版本号为stash@{1}的工作取出来

    $ git stash apply stash@{1}
    将栈清空

    $ git stash clear
